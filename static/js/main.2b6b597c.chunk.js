(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),c=a.n(i),l=(a(15),a(9)),o=a(1),s=a(6),u=a(7),m=function(){function e(t){Object(s.a)(this,e),this._headers=t.headers,this._baseUrl=t.baseUrl}return Object(u.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._getResponseData)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._getResponseData)}},{key:"editProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}},{key:"addCardApi",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}},{key:"changeLikeCardStatus",value:function(e,t){return t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._getResponseData):fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}}]),e}(),d=new m({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"e0cd9749-f008-4064-bc64-61e9ac8b0f57","Content-Type":"application/json"}}),_=r.a.createContext();var f=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__vector"}))};var p=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,i=e.onCardDelete,c=r.a.useContext(_),l=t.owner._id===c._id,o="".concat(l?"elements__delete-button_visible":"elements__delete-button_hidden"),s=t.likes.some((function(e){return e._id===c._id})),u="".concat(s?"elements__like-button_pressed":"");return r.a.createElement("div",{className:"elements__item"},r.a.createElement("img",{src:t.link,alt:"Card",className:"elements__img",onClick:function(){a(t)}}),r.a.createElement("button",{className:o,onClick:function(){i(t)}}),r.a.createElement("div",{className:"elements__content"},r.a.createElement("h2",{className:"elements__title"},t.name),r.a.createElement("div",{className:"elements__likes"},r.a.createElement("button",{type:"button",className:"elements__like-button ".concat(u),onClick:function(){n(t)}}),r.a.createElement("p",{className:"elements__like-number"},t.likes.length))))},h=a(8),E=a.n(h);var b=function(e){var t=e.onEditAvatarClick,a=e.onEditProfileClick,n=e.onAddPlaceClick,i=e.onCardClick,c=e.cards,l=e.handleCardLike,o=e.handleCardDelete,s=r.a.useContext(_);return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",null,r.a.createElement("img",{src:s.avatar,alt:"Current user",className:"profile__avatar",onClick:t}),r.a.createElement("img",{src:E.a,alt:"Edit",className:"profile__avatar-edit"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__info-header"},r.a.createElement("h1",{className:"profile__title"},s.name),r.a.createElement("button",{type:"button",className:"profile__info-edit",onClick:a})),r.a.createElement("p",{className:"profile__subtitle"},s.about)),r.a.createElement("button",{type:"button",className:"profile__add-button",onClick:n})),r.a.createElement("section",{className:"elements"},c.map((function(e){return r.a.createElement(p,{key:e._id,card:e,onCardClick:i,onCardLike:l,onCardDelete:o})}))))};var C=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2021 Around The U.S."))};var v=function(e){var t=e.card,a=e.isOpen,n=e.onClose;return r.a.createElement("div",{className:"modal modal_img ".concat(a&&"modal_open")},r.a.createElement("div",{className:"modal__container-img"},r.a.createElement("button",{type:"button",className:"modal__close",onClick:n}),r.a.createElement("figure",{className:"modal__figure"},r.a.createElement("img",{src:t?t.link:{},alt:"Selected card",className:"modal__image"}),r.a.createElement("figcaption",{className:"modal__caption"}))))};var g=function(e){var t=e.name,a=e.title,n=e.isOpen,i=e.onClose,c=e.onSubmit,l=e.children;return r.a.createElement("div",{className:"modal modal_type_".concat(t," ").concat(n&&"modal_open")},r.a.createElement("div",{className:"modal__container"},r.a.createElement("button",{type:"button",className:"modal__close",onClick:i}),r.a.createElement("h2",{className:"modal__title"},a),r.a.createElement("form",{action:"#",onSubmit:c,className:"modal__form",name:"modal-form"},l,r.a.createElement("button",{type:"submit",className:"modal__submit-button"},"Save"))))};var A=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,i=r.a.useContext(_),c=r.a.useState(""),l=Object(o.a)(c,2),s=l[0],u=l[1],m=r.a.useState(""),d=Object(o.a)(m,2),f=d[0],p=d[1];return r.a.useEffect((function(){u(i.name),p(i.about)}),[i]),r.a.createElement(g,{name:"edit-profile",title:"Edit Profile",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:s,about:f})}},r.a.createElement("input",{type:"text",className:"modal__input modal__input_field_name",id:"name-input",placeholder:"Full name",name:s,minLength:2,maxLength:40,required:!0,onChange:function(e){u(e.target.value)}}),r.a.createElement("span",{id:"name-input-error",className:"modal__error-text"}),r.a.createElement("input",{type:"text",className:"modal__input modal__input_field_profession",id:"profession-input",placeholder:"Description",name:f,minLength:2,maxLength:200,required:!0,onChange:function(e){p(e.target.value)}}),r.a.createElement("span",{id:"profession-input-error",className:"modal__error-text"}))};var k=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,i=r.a.useRef();return r.a.createElement(g,{name:"change-avatar",title:"Change profile picture",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({avatar:i.current.value})}},r.a.createElement("input",{type:"url",className:"modal__input modal__input_field_profile-picture-link",id:"profile-picture-link",placeholder:"Profile picture link",name:"avatar",required:!0,ref:i}),r.a.createElement("span",{id:"profile-picture-link-error",className:"modal__error-text"}))};var N=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlaceSubmit,i=r.a.useRef(),c=r.a.useRef();return r.a.createElement(g,{name:"add-card",title:"New place",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:i.current.value,link:c.current.value})}},r.a.createElement("input",{type:"text",className:"modal__input modal__input_field_title",id:"card-title-input",placeholder:"Title",name:"Title",minLength:"1",maxLength:"30",required:!0,ref:i}),r.a.createElement("span",{id:"card-title-input-error",className:"modal__error-text"}),r.a.createElement("input",{type:"url",className:"modal__input modal__input_field_image-link",id:"card-input-link",placeholder:"Image link",name:"Image link",required:!0,ref:c}),r.a.createElement("span",{id:"card-input-link-error",className:"modal__error-text"}))};var O=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],m=s[1],p=Object(n.useState)(!1),h=Object(o.a)(p,2),E=h[0],g=h[1],O=Object(n.useState)(!1),S=Object(o.a)(O,2),y=S[0],j=S[1],U=Object(n.useState)(null),D=Object(o.a)(U,2),x=D[0],R=D[1],P=Object(n.useState)({}),L=Object(o.a)(P,2),T=L[0],B=L[1],I=Object(n.useState)([]),w=Object(o.a)(I,2),J=w[0],Q=w[1];function F(){g(!1),i(!1),m(!1),j(!1)}return Object(n.useEffect)((function(){d.getUserInfo().then((function(e){B(e)})).catch((function(e){return console.log("Error.....: ".concat(e))}))}),[]),Object(n.useEffect)((function(){d.getInitialCards().then((function(e){Q(e)})).catch((function(e){return console.log("Error.....: ".concat(e))}))}),[]),r.a.createElement(_.Provider,{value:T},r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page__container"},r.a.createElement(f,null),r.a.createElement(b,{onEditProfileClick:function(){i(!0)},onAddPlaceClick:function(){m(!0)},onEditAvatarClick:function(){g(!0)},onCardClick:function(e){R(e),j(!0)},onClose:F,cards:J,handleCardLike:function(e){var t=e.likes.some((function(e){return e._id===T._id}));d.changeLikeCardStatus(e._id,!t).then((function(t){Q((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))}))},handleCardDelete:function(e){d.deleteCard(e._id);var t=J.filter((function(t){return t._id!==e._id}));Q(t)}}),r.a.createElement(C,null),r.a.createElement(A,{name:"edit-profile",title:"Edit Profile",isOpen:a,onClose:F,onUpdateUser:function(e){d.editProfile(e).then((function(e){B(e),F()}))}}),r.a.createElement(k,{isOpen:E,onClose:F,onUpdateAvatar:function(e){d.updateAvatar(e).then((function(e){B(e),F()}))}}),r.a.createElement(N,{isOpen:u,onClose:F,onAddPlaceSubmit:function(e){d.addCardApi(e).then((function(e){Q([e].concat(Object(l.a)(J))),F()}))}}),r.a.createElement(v,{card:x,isOpen:y,onClose:F}))))},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),S()},8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB9SURBVHgB7dbBCYAwDAXQ4ASO4CiO4AgdwQ10BDfqKBklpjRCKIiXfLzkQyi95PHppUSAiMiiU9tJqBjC0sMQbEAEgr0gTypF5AOJaZRIIokkksifiEEFjjjsRDY5/DKHxTaxhTxgezSyQt/CMuls7j7rFEJE+kfvas0ImBsR7skYWCY75QAAAABJRU5ErkJggg=="}},[[10,1,2]]]);
//# sourceMappingURL=main.2b6b597c.chunk.js.map