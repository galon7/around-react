(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{11:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(4),c=a.n(i),r=(a(11),a(2)),o=a(5),l=a(6),d=new(function(){function e(t){Object(o.a)(this,e),this._headers=t.headers,this._baseUrl=t.baseUrl}return Object(l.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._getResponseData)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._getResponseData)}},{key:"editProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}},{key:"addCardApi",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponseData)}},{key:"changeLikeCardStatus",value:function(e,t){return t?(console.log("aaaaaaa"),fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._getResponseData)):(console.log("bbbbb"),fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._getResponseData))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"e0cd9749-f008-4064-bc64-61e9ac8b0f57","Content-Type":"application/json"}}),u=s.a.createContext(),m=a(0);var _=function(){return Object(m.jsx)("header",{className:"header",children:Object(m.jsx)("div",{className:"header__vector"})})};var j=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,i=e.onCardDelete,c=s.a.useContext(u),r=t.owner._id===c._id,o="".concat(r?"elements__delete-button_visible":"elements__delete-button_hidden"),l=t.likes.some((function(e){return e._id===c._id})),d="".concat(l?"elements__like-button_pressed":"");return Object(m.jsxs)("div",{className:"elements__item",children:[Object(m.jsx)("img",{src:t.link,alt:"Card",className:"elements__img",onClick:function(){a(t)}}),Object(m.jsx)("button",{className:o,onClick:function(){i(t)}}),Object(m.jsxs)("div",{className:"elements__content",children:[Object(m.jsx)("h2",{className:"elements__title",children:t.name}),Object(m.jsxs)("div",{className:"elements__likes",children:[Object(m.jsx)("button",{type:"button",className:"elements__like-button ".concat(d),onClick:function(){n(t)}}),Object(m.jsx)("p",{className:"elements__like-number",children:t.likes.length})]})]})]})};var h=function(e){var t=e.onEditAvatarClick,a=e.onEditProfileClick,i=e.onAddPlaceClick,c=e.onCardClick,o=s.a.useContext(u),l=Object(n.useState)([]),_=Object(r.a)(l,2),h=_[0],b=_[1];function p(e){var t=e.likes.some((function(e){return e._id===o._id}));d.changeLikeCardStatus(e._id,!t).then((function(t){b((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))}))}function f(e){d.deleteCard(e._id);var t=h.filter((function(t){return t._id!==e._id}));b(t)}return Object(n.useEffect)((function(){d.getInitialCards().then((function(e){b(e)})).catch((function(e){return console.log("Error.....: ".concat(e))}))}),[]),Object(m.jsxs)("main",{children:[Object(m.jsxs)("section",{className:"profile",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:o.avatar,alt:"Current user",className:"profile__avatar",onClick:t}),Object(m.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB9SURBVHgB7dbBCYAwDAXQ4ASO4CiO4AgdwQ10BDfqKBklpjRCKIiXfLzkQyi95PHppUSAiMiiU9tJqBjC0sMQbEAEgr0gTypF5AOJaZRIIokkksifiEEFjjjsRDY5/DKHxTaxhTxgezSyQt/CMuls7j7rFEJE+kfvas0ImBsR7skYWCY75QAAAABJRU5ErkJggg==",alt:"Edit",className:"profile__avatar-edit"})]}),Object(m.jsxs)("div",{className:"profile__info",children:[Object(m.jsxs)("div",{className:"profile__info-header",children:[Object(m.jsx)("h1",{className:"profile__title",children:o.name}),Object(m.jsx)("button",{type:"button",className:"profile__info-edit",onClick:a})]}),Object(m.jsx)("p",{className:"profile__subtitle",children:o.about})]}),Object(m.jsx)("button",{type:"button",className:"profile__add-button",onClick:i})]}),Object(m.jsx)("section",{className:"elements",children:h.map((function(e){return Object(m.jsx)(j,{card:e,onCardClick:c,onCardLike:p,onCardDelete:f},e._id)}))})]})};var b=function(){return Object(m.jsx)("footer",{className:"footer",children:Object(m.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around The U.S."})})};var p=function(e){var t=e.name,a=e.isOpen,n=e.onClose,s=e.title,i=e.children;return Object(m.jsx)("div",{className:"modal modal_type_".concat(t," ").concat(a&&"modal_open"),children:Object(m.jsxs)("div",{className:"modal__container",children:[Object(m.jsx)("button",{type:"button",className:"modal__close",onClick:n}),Object(m.jsx)("h2",{className:"modal__title",children:s}),Object(m.jsxs)("form",{action:"#",className:"modal__form",name:"modal-form",children:[i,Object(m.jsx)("button",{type:"submit",className:"modal__submit-button",children:"Save"})]})]})})};var f=function(e){var t=e.card,a=e.isOpen,n=e.onClose;return Object(m.jsx)("div",{className:"modal modal_img ".concat(a&&"modal_open"),children:Object(m.jsxs)("div",{className:"modal__container-img",children:[Object(m.jsx)("button",{type:"button",className:"modal__close",onClick:n}),Object(m.jsxs)("figure",{className:"modal__figure",children:[Object(m.jsx)("img",{src:t?t.link:{},alt:"Selected card",className:"modal__image"}),Object(m.jsx)("figcaption",{className:"modal__caption"})]})]})})};var O=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(!1),c=Object(r.a)(i,2),o=c[0],l=c[1],j=Object(n.useState)(!1),O=Object(r.a)(j,2),x=O[0],g=O[1],k=Object(n.useState)(!1),C=Object(r.a)(k,2),A=C[0],v=C[1],N=Object(n.useState)(null),y=Object(r.a)(N,2),E=y[0],S=y[1],U=Object(n.useState)({}),D=Object(r.a)(U,2),R=D[0],P=D[1];function L(){g(!1),s(!1),l(!1),v(!1)}return Object(n.useEffect)((function(){d.getUserInfo().then((function(e){P(e)})).catch((function(e){return console.log("Error.....: ".concat(e))}))}),[]),Object(m.jsx)(u.Provider,{value:R,children:Object(m.jsx)("div",{className:"page",children:Object(m.jsxs)("div",{className:"page__container",children:[Object(m.jsx)(_,{}),Object(m.jsx)(h,{onEditProfileClick:function(){s(!0)},onAddPlaceClick:function(){l(!0)},onEditAvatarClick:function(){g(!0)},onCardClick:function(e){S(e),v(!0)},onClose:L}),Object(m.jsx)(b,{}),Object(m.jsxs)(p,{name:"edit-profile",title:"Edit Profile",isOpen:a,onClose:L,children:[Object(m.jsx)("input",{type:"text",className:"modal__input modal__input_field_name",id:"name-input",placeholder:"Full name",name:"name",minLength:2,maxLength:40,required:!0}),Object(m.jsx)("span",{id:"name-input-error",className:"modal__error-text"}),Object(m.jsx)("input",{type:"text",className:"modal__input modal__input_field_profession",id:"profession-input",placeholder:"Profession",name:"profession",minLength:2,maxLength:200,required:!0}),Object(m.jsx)("span",{id:"profession-input-error",className:"modal__error-text"})]}),Object(m.jsxs)(p,{name:"add-card",title:"New place",isOpen:o,onClose:L,children:[Object(m.jsx)("input",{type:"text",className:"modal__input modal__input_field_title",id:"card-title-input",placeholder:"Title",name:"Title",minLength:"1",maxLength:"30",required:!0}),Object(m.jsx)("span",{id:"card-title-input-error",className:"modal__error-text"}),Object(m.jsx)("input",{type:"url",className:"modal__input modal__input_field_image-link",id:"card-input-link",placeholder:"Image link",name:"Image link",required:!0}),Object(m.jsx)("span",{id:"card-input-link-error",className:"modal__error-text"})]}),Object(m.jsxs)(p,{name:"change-avatar",title:"Change profile picture",isOpen:x,onClose:L,children:[Object(m.jsx)("input",{type:"url",className:"modal__input modal__input_field_profile-picture-link",id:"profile-picture-link",placeholder:"Profile picture link",name:"avatar",required:!0}),Object(m.jsx)("span",{id:"profile-picture-link-error",className:"modal__error-text"})]}),Object(m.jsx)(f,{card:E,isOpen:A,onClose:L})]})})})},x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,14)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root")),x()}},[[13,1,2]]]);
//# sourceMappingURL=main.b19b8ce8.chunk.js.map